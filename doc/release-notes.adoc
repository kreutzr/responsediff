= ResponseDiff
:encoding: utf-8
:lang: de
:!toc:

image::img/responsediff-logo_320x160.png[ResponseDiff]

== V1.3.0 (2025-xx-xx)
=== Type
This is a regular maintenance release.

=== Hints

* ...

=== Features / Changes

* ...

=== Bug fixes

* ...

=== External libraries

* ...

=== Known issues

* ...


== V1.2.1 (2025-xx-xx)
=== Type
This is a regular maintenance release.

=== Hints

* ...

=== Features / Changes

* ...

=== Bug fixes

* ...

=== External libraries

* ...

=== Known issues

* ...


== V1.2.0 (2025-09-19)
=== Type
This is a regular maintenance release.

=== External libraries

* Upgrade "dependency-check-maven" plugin from 8.4.3 to 12.1.3
* Upgrade asciidoctorj from 2.5.13 t 3.0.0
* Upgrade assertj from 3.26.3 to 3.27.4
* Upgrade glassfis jaxb-runtime from 4.0.1 to 4.0.5
* Upgrade jackson-databind form 2.18.2 to 2.20.0
* Upgrade jakarta.xml.bind-api from 4.0.2 to 4.0.4
* Upgrade junit-jupiter from 5.11.3 to 5.13.4
* Upgrade jsonsmart from 2.5.2 to 2.6.0
* Upgrade lmax.disruptor from 3.4.4 to 4.0.0
* Upgrade log4j from 2.24.2 to 2.25.1
* Upgrade mockito from 5.14.2 to 5.19.0
* Upgrade slf4j from 2.0.16 t 2.0.17


== V1.1.0 (2025-07-23)
=== Type
This is a regular maintenance release.

=== Features / Changes

* For tests with attribute "ifExecutionContextContains" set, this context is rendered in the report.
* Added optional parameter "splitIntoLines" to TextToJsonResponseFilter.
* Error explanations are rendered in the report together with the error message itself.

=== Bug fixes

* Fixed parsing issue when reading sample token in the example login request within "start-responseDiff" script.
* Fixed issue with TextToJsonResponseFilter when reading multi-line texts.
* Fixed masking regular expressions in the report to avoid confusing AsciiDoc.
* Fixed error message text when the expected value is described as a regular expression and the actual value is unexpectedly null.


== V1.0.1 (2025-06-22)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Provided responsediff-demo project at github for an easy start.

=== Bug fixes

* Fixed issue of unnecessary "null" folders when downloading without having the "workPath" attribute set in the test set XML tag.
* Fixed some typos in manuals.
* Fixed issue in AsciiDoc report when "reportControlResponse" in responseDiff configuration is enabled.

=== Known issues

* The response of the example login request in "doc/start-responseDiff" needs to be parsed. This is already fixed in V1.0.2-SNAPSHOT.
* The three "start-*" scripts within the "doc/" folder may have "\r" endings. If this causes problems, call "sed -i 's/\r$//' ./doc/<filename>" on each.


== V1.0.0 (2025-06-16)
=== Type
This is a regular maintenance release.

=== Hints

* **BREAKING CHANGE:** The namespace was set to "**com.github.kreutzr.responsediff**" since the code was moved to github.
  ** Therefore you will have to adjust your XML files when registering the filters that are coming with ResponseDiff.
  ** Thereby the package of the main class also changed, so adjusted your scripts (if any), too.

=== Features / Changes

* Missing "content-length" headers are set automatically.
* A PDF report is generated by default.
* The manual was translated from German to English.
* Added optional parameter "maskAuthorizationHeaderInCurl" to responseDiff configuration.
* Added optional parameter "reportTitle" to responseDiff configuration.
* Added optional parameter "reportControlResponse" to responseDiff configuration.
* File name extensions of downloaded files are generated from the content type header if not received from the server.
* Added NormalizeJsonBodyResponseFilter to handle JSON attribute keys that contain dots (e.g., "project.id").
* Added optional attribute "workPath" to "testSet" tag in setup XML to support generic TestSets.
* Added optional attribute "waitBefore" to "test" tag to support asynchronous requests.
* Added optional attribute "ifExecutionContextContains" to support conditional testing.

=== Bug fixes

* Fixed handling of compressed files.
* Fixed issue when including setup files within same folder.
* Fixed issue with missing images in HTML manuals.
* Fixed issue when following a complete URL from the "location" header when receiving a 303 (Redirect) HTTP status.
* Fixed issue: Inherited expected values and ignores could be overridden but they must not! Fixed ignoring of expected values and expectation of ignored values.

=== External libraries

* Upgrade net.minidev.jsonsmart from 2.5.0 to 2.5.2
* Upgrade asciidoctor-maven-plugin from 2.2.5 to 2.2.6


== V0.13.0 (2024-12-06)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Method randomUUID accepts optional replacement parameters.
* A stacktrace is logged to log file (not only console) on unexpected exit.
* Added optional parameter "contentType" to XmlToJsonResponseFilter.
* Added TextToJsonResponseFilter.
* The values of the Allow-Header appear in alphabetical order now to allow easier tests.
* SortJsonBodyResponseFilter skips non-JSON responses.
* TextToJsonResponseFilter skips JSON responses.
* XmlToJsonResponseFilter skips JSON responses.

=== Bug fixes

* Fixed corrupted file URLs after download due to AsciiDoc rendering.
* Fixed bug that content-type JSON is not recognized, when a charset information is present, too.
* Fixed typo in generated curl commands (-D -> -d).
* Fixed duplicated "/" in URL path when reading path from variable.
* Fixed issue reading individual header values for candidate, reference and control.
* Fixed Null value handling in JsonPath expressions.
* Fixed minDuration, maxDuration and avgDuration in report.
* Fixed crash when invocing HEAD, CONNECT, OPTIONS or TRACE.
* Non-JSON responses are no longer ignored when processing the response filter chain.
* Fixed corner case when breakOnFailure is activated and all tests fail.

=== External libraries

* Added disruptor version 3.4.4
* Upgrade assertj from 3.24.2 to 3.26.3
* Upgrade asciidoctorj from 2.5.7 to 2.5.13
* Upgrade asciidoctorj-pdf from 2.3.7 to 2.3.19
* Upgrade jackson-databind from 2.16.1 to 2.18.2
* Upgrade jakarta.xml.bind-api from 4.0.0 to 4.0.2
* Upgrade junit-jupiter from 5.9.2 to 5.11.3
* Upgrade log4j from 2.22.0 to 2.24.2
* Upgrade mockito from 5.3.1 to 5.14.2
* Upgrade slf4j from 1.7.36 to 2.0.16

=== Internal

* Introduced maven profiles "dependencyCheck" and "license-summary"


== V0.12.0 (2024-05-03)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Each check of an expected response value is counted and reported.
* Optional configuration parameter "reportWhiteNoise" added, to report differences that were identified as whiteNoise, too. (default is false)
* Enabled more specific logging by providing a logger for each class.
* TestSet definitions may include filter registrations.
* Attribute "ticketReference" is accepted by httpStatus, header, value and body elements within the response/expected block.
* Provided 'justExplain' attribute to XML ignore-tag to not ignore the JsonPath or header but to provide an explanation for the occuring differences.
* Functions that were reserved for variables by now, are allowed for expected values und headers.

=== Bug fixes

* Defined expected values that are skipped due to an empty or non-JSON response body lead to a test failure. (Additional fix was required)
* Fixed class cast exception on non string response variables.
* Fixed bug in parsing timestamps with milliseconds and/or time zone information.


== V0.11.0 (2024-04-16)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Extended description of XmlValue attributes "checkPathExists" and "checkIsNull" in the manual to avoid misunderstandings.
* Added support for more complex JsonPath expressions.
* Slight performance improvement for array sorting in SortJsonBodyResponseFilter.
* The HTTP status message is displayed for each reported HTTP status mismatch.
* Multiple variable functions may be combined within the same variable definition.
* Variables may be used in definition of expected values.
* Defined expected values that are skipped due to an empty or non-JSON response body lead to a test failure.

=== Bug fixes

* Ticket references of a response ignore element are copied to the ticket references of the surrounding test.
* Fixed bug in expected values where defined paths were applied as substrings (e.g. path "$.type" was applied to attributes with name "typeName").
* Fixed bug where checkPathExists did not work for paths with wildcards.
* Fixed type mismatch detection in expected values.
* Fixed checkIsNull for complex JsonPaths.

=== External libraries

* Upgrade asciidoctorj from 2.5.11 to 2.5.12
* Upgrade jsonpath from 2.8.0 to 2.9.0


== V0.10.3 (2024-02-28)
=== Type
This is a bug fix release for 0.10.2.

=== Features / Changes

* Random values are allowed in normal variable tags.
* Variable value "${randomBoolean()}" added
* Variable value "${randomEnum()}" added
* Allowed usage of "today" (plus optional offset) as parameter for variable function "${randomDate()}".
* Allowed usage of "now" (plus optional offset) as parameter for variable function "${randomDateTime()}".

=== Bug fixes

* Fixed consistent random values for all service instances.
* Fixed behavior of variable function "${nowDate()}" and "${nowDate( <offsetDays> )}".
* Fixed behavior of variable function "${nowDateTime()}" and "${nowDateTime( <offsetMillis> )}".


== V0.10.2 (2024-02-22)
=== Type
This is a bug fix release for V0.10.1.

=== Hints

* The interface of DiffRequestFilter has slightly changed. If you have created your own request filter class, the method apply() expects the service id (either REFERENCE, CONTROL or CANDIDATE - see TestSetHandler) and the current XmlTest object as additional parameters.

=== Features / Changes

* Mass data variables are considered within the report's test id and test description.

=== Bug fixes

* Mass data variables are considered within the report's request description.


== V0.10.1 (2024-02-16)
=== Type
This is a bug fix release for 0.10.0.

=== Bug fixes

* Fixed missing variables replacement in request parameters when no VariablesRequestFilter is used.
* Fixed variable replacement in URL encoded request endpoints.


== V0.10.0 (2024-02-13)
=== Type
This is a regular maintenance release.

=== Hints

* Because the tag <structureDepth> was moved from <analysis> to <test>, <testSet> and <XmlResponseDiffSetup>, XML report files created with an older version **must be adapted** accordingly, if  they shall be used as reference (server substitute).

=== Features / Changes

* Added icons to headlines for a better distinction between failed and skipped tests.
* Added overAllExpected tag to support multi-invocation performance tests.

=== Bug fixes

* Duration rendering (XSLT) fixed. ("month" instead of "min")
* Analysis block data fixed in scenarios with set "breakOnFailure" tag on Test level.
* Fixed redundant http status evaluation.


== V0.9.0 (2024-01-17)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Besides application/json and application/problem+json hypermedia formats as application/vnd.api+json, application/vnd.hal+json,  application/vnd.siren+json and application/vnd.uber+json are accepted.
* A created report that was transformed to AsciiDoc (*.adoc) may be converted to html and/or pdf automatically by using the new reportConversionFormats attribute.
* Manual: PDF version is automatically created when project is built.
* Names of downloaded files are clearly structured as "<testfileName>/<testId>\__[reference | control | candidate]__<fileName>" (e.g. "my-endpoint/some-test\__candidate__logo.png").
* Added optional parameter "storeOriginalResponse" for response filters.
* Ticket reference entries may contain whitespaces.
* Added formatting of dates and durations to report.
* Variables may be read from headers.

=== External libraries

* Upgrade jackson-databind from 2.15.2 to 2.16.1


== V0.8.0 (2023-12-14)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Added RemoveHeaderRequestFilter
* Allowed to hide body content in report and download file if requested (e.g. for security relevant information).

=== Bug fixes

* Removed blanks after serviceId (candidate, reference or control) in generic download file name.
* Externally passed headers (via ResponseDiff configuration) are considered in CURL now.

=== External libraries

* Upgrade slf4j from 1.7.32 to 1.7.36
* Upgrade log4j from 2.20.0 to 2.22.0


== V0.7.0 (2023-11-29)
=== Type
This is a regular maintenance release.

=== Hints

* Breaking Change: Paths of files used by filters must be marked as relative (must start with "./"). Otherwise they are not copied by the CloneTestSetup tool.

=== Features / Changes

* Opened response validation (httpStatus, headers and maxDuration) for any content type. (Note: Expected values and ignore paths remain reserved for JSON content.)
* Filter inheritance may be interrupted.
* Added file support (up- and download).
* Extended sorting options for SortJsonBodyResponseFilter.

=== Bug fixes

* Fixed bug with checkPathExists and checkIsNull for JsonPaths with wildcards.


== V0.6.0 (2023-11-19)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Added wildcard support for expected values.
* Added checkPathExists for expected values.
* Added checkIsNull for expected values.
* Added range support in expected values for date, datetime and duration.
* Added expected maximum request duration.
* Added noBody attribute to expected body check.
* The XSD for TestSetups is copied to the doc/xsds folder.
* Introduced proprietary JsonPath syntax extension for full JsonPath support when reading response variables.
* Added information of used ResponsDiff version to report.

=== Bug fixes

* Missing reponse headers are discovered (if no header is returned at all)
* Missing expected body check added.


== V0.5.3 (2023-11-03)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Attribute "checkInverse" added for expected HttpStatus, headers and values.
* Manual: HTML version is automatically created when project is built.
* Added epsilon comparison for expected values of type "int" and "long".

=== Bug fixes

* Problem with expected values of type "long" fixed.
* Manual: Fixed minor AsciiDoc syntax typo in a code example block.
* Fixed inheritance of response ignore header definitions.
* Fixed wild card issue in ignore XML tags.


== V0.5.2 (2023-10-18)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Files that are passed to filters with the source parameter are copied by CloneTestSetup now.
* Random values (UUID, Integer, Long, Double, Date and DateTime) and current time values (Date and DateTime) are supported by the SetVariablesRequestFilter.


== V0.5.1 (2023-10-11)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Parameter "startupSleepMs" added for execution delay (e.g. to hook on a profiler). Since this is for technical use, the parameter is not described in the manual.
* Tool "CompareJson" added.

=== Bug fixes

* Error when comparing httpStatus fixed.

=== Known issues

* Configuration "ignorePaths" for tool "CompareJson" does not yet support wildcards (\*).


== V0.5.0 (2023-09-12)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Tests may be executed selectively.
* AsciiDoc report handles multiple ticket references.
* "breakOnFailure" attribute allows skipping of followup tests after a so marked test failed.

=== Bug fixes

* JsonPath in ignore-Tags handles wildcard "\*" expressions (e.g. "$.values[*].newAttribute" instead of "$.values[0].newAttribute", "$.values[1].newAttribute", "$.values[2].newAttribute", ...).

=== Known issues

* Wildcard expressions may effect AsciiDoc report rendering (e.g. "*" may be consumed and the follwing text appears bold).


== V0.4.0 (2023-09-05)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Attribute "forEver" in ignore-Tags enabled.

=== Bug fixes

* Sorting issue in SortJsonBodyResponseFilter fixed.


== V0.3.2 (2023-08-30)
=== Type
This is a regular maintenance release.

=== Features / Changes

* rootPath parameter is optional now assuming the working directory.
* SetVariablesRequestFilter supports the useVariables=true configuration.

=== Bug fixes

* Iterations issue fixed.
* SetVariablesRequestFilter does no longer deliver different variable values for reference, control and candidate URL.


== V0.3.1 (2023-08-28)
=== Type
This is a regular maintenance release.


=== Bug fixes

* Content type "application/problem+json" is treated as JSON.
* Multi value headers are merged to one single String (comma separated according to HTTP RFC 2616).
* start-cloneTestSetup script was simplified.
* Variable replacement in request URL fixed.

=== Known issues

* Iterations are multiplied by themselfs when being used.


== V0.3.0 (2023-08-10)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Tool CloneTestSetup for version change support added.


== V0.2.0 (2023-08-08)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Requests with unresolved variables are not send.
* HTTP methods "GET", "HEAD" (new), "POST", "PUT", "DELETE", "CONNECT" (new), "OPTIONS" (new), "TRACE" (new) and "PATCH" (new) are supported.

=== Bug fixes

* Empty non JSON responses are accepted.
* XmlToJsonResponseFilter adjusts the "content-type" header to "application/json" now.
* Headers and HTTP status are comapred for non JSON responses.


== V0.1.0 (2023-08-07)
=== Type
This is a regular maintenance release.

=== Features / Changes

* SortJsonBodyResponseFilter allows to sort JSON array nodes by configuration.


== V0.0.4 (2023-08-04)
=== Type
This is a bug fix release.

=== Bug fixes

* "expected" blocks within tests are not ignored any more.


== V0.0.3 (2023-07-31)
=== Type

This is a bug fix release.

=== Bug fixes

* Fixed bug with Parameter "referenceFilePath" never being null. => No server requests sent anymore.


== V0.0.2 (2023-07-10)
=== Type
This is a regular maintenance release.

=== Features / Changes

* Reference response is reported for comparison => Improved AsciiDoc report
* MIT License
* XML-To-ADOC XSLT => Improved AsciiDoc report
* report attribut at XmlTestSet and XmlTest => Selective reporting (e.g suppress successful tests)
* structureDepth attribute at XmlAnalysis => Improved AsciiDoc report
* ReferenceFilePath allows reference file instead of a reference URL
* OWASP dependency check

=== Bug fixes

* Fixed report headline
* Fixed bug in fail count


== V0.0.1 (2023-06-20)

=== Type
This is the initial release.

=== Features / Changes

* Initial Manual
* Log4J configuration for slf4j
* Variable inheritance
* XML-To-JSON ResponseFilter
* SortJsonBody ResponseFilter
* Basic test cases
* XSLT integration
* Regression testing
* Functional testing

=== Bug fixes
* Fixed XSD validation

=== Known issues

* HTML report is ugly
